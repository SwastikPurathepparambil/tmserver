tasks:
  research_task:
    description: |
      Analyze the job posting at {job_posting_url}. Extract and clearly label:
      - Required skills (must-have)
      - Preferred skills (nice-to-have)
      - Responsibilities / team context
      - Tech stack (languages, frameworks, tools, cloud/services)
      - Eligibility / constraints (location, timeline, student status)
      - Exact keywords likely used by ATS

      IMPORTANT FORMAT RULES:
      - You MUST return a single JSON object.
      - Do NOT wrap the JSON in backticks.
      - Do NOT include any markdown or commentary, just raw JSON.
    expected_output: |
      {
        "required_skills": ["string", "..."],
        "preferred_skills": ["string", "..."],
        "responsibilities": ["string", "..."],
        "tech_stack": ["string", "..."],
        "eligibility": ["string", "..."],
        "keywords": ["string", "..."],
        "notes": "string"
      }
    agent: researcher
    async_execution: true

  profile_task:
    description: |
      From the provided resume/work-experience text, identify demonstrated skills,
      projects, outcomes, and strongest stories. Map them to the research_task output
      and note any gaps (do not invent). Use the reading tools over resume and
      work-experience content.

      IMPORTANT FORMAT RULES:
      - You MUST return a single JSON object.
      - Do NOT wrap the JSON in backticks.
      - Do NOT include any markdown or commentary, just raw JSON.
    expected_output: |
      {
        "skills": ["string", "..."],
        "projects": [
          { "name": "string", "evidence": "string" }
        ],
        "experience": [
          {
            "role": "string",
            "company": "string",
            "bullets": ["string", "..."]
          }
        ],
        "outcomes": ["string", "..."],
        "gaps": ["string", "..."],
        "summary": "string"
      }
    agent: profiler
    async_execution: true

  resume_strategy_task:
    description: |
      Produce a single tailored resume using ONLY facts from the candidate materials
      and profile_task, aligned to research_task requirements.

      You are NOT outputting free-form text. You are outputting a structured JSON
      resume that will later be rendered into a PDF.

      SCHEMA (this is VERY IMPORTANT):

      {
        "contact": {
          "name": "Full Name (string)",
          "email": "string or null",
          "phone": "string or null",
          "location": "string or null",
          "links": ["string", "..."]
        },
        "headline": "Short title/headline string tailored to the job",
        "summary": "2–4 sentence professional summary aligned with the job",
        "sections": [
          {
            "title": "Education",
            "items": [
              {
                "institution": "string",
                "degree": "string",
                "location": "string or null",
                "graduation": "string or null",
                "coursework": ["string", "..."]
              }
            ]
          },
          {
            "title": "Experience",
            "items": [
              {
                "role": "string",
                "company": "string",
                "location": "string or null",
                "start_date": "string or null",
                "end_date": "string or null",
                "bullets": ["string", "..."]
              }
            ]
          },
          {
            "title": "Projects",
            "items": [
              {
                "name": "string",
                "tech_stack": ["string", "..."],
                "bullets": ["string", "..."]
              }
            ]
          }
        ]
      }

      HARD FORMAT RULES:
      - You MUST return EXACTLY ONE JSON object that matches the schema above.
      - The sections MUST include at least these three titles: "Education", "Experience", "Projects".
      - Do NOT include markdown, backticks, or any explanatory text.
      - Use concise, impact-focused bullets under Experience/Projects (1–2 lines each).
      - Naturally include relevant keywords from research_task only if they are true for the candidate.
    expected_output: |
      {
        "contact": {
          "name": "string",
          "email": "string",
          "phone": "string or null",
          "location": "string or null",
          "links": ["string", "..."]
        },
        "headline": "string",
        "summary": "string",
        "sections": [
          {
            "title": "Education",
            "items": [
              {
                "institution": "string",
                "degree": "string",
                "location": "string or null",
                "graduation": "string or null",
                "coursework": ["string", "..."]
              }
            ]
          },
          {
            "title": "Experience",
            "items": [
              {
                "role": "string",
                "company": "string",
                "location": "string or null",
                "start_date": "string or null",
                "end_date": "string or null",
                "bullets": ["string", "..."]
              }
            ]
          },
          {
            "title": "Projects",
            "items": [
              {
                "name": "string",
                "tech_stack": ["string", "..."],
                "bullets": ["string", "..."]
              }
            ]
          }
        ]
      }
    context: ["research_task", "profile_task"]
    agent: resume_strategist
    async_execution: false
