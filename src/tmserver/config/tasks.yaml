# src/resume_tailor/config/tasks.yaml
tasks:
  research_task:
    description: >
      Analyze the job posting at {job_posting_url}. Extract and label:
      - Required skills (must-have), Preferred skills (nice-to-have)
      - Responsibilities / team context
      - Tech stack (languages, frameworks, tools, cloud/services)
      - Eligibility / constraints (location, timeline, student status)
      - Exact keywords likely used by ATS
      Keep it factual; no speculation.
    expected_output: >
      { "required_skills": [...], "preferred_skills": [...], "responsibilities": [...],
        "tech_stack": [...], "eligibility": [...], "keywords": [...], "notes": "..." }
    agent: "researcher"
    async_execution: true

  profile_task:
    description: >
      From the provided resume/work-experience text, identify demonstrated skills,
      projects, outcomes, and strongest stories. Map them to the research_task output
      and note any gaps (do not invent). Use the reading/search tools over resume and
      work-experience content.
    expected_output: >
      { "skills": [...], "projects": [{"name":"...","evidence":"..."}],
        "experience": [{"role":"...","company":"...","bullets":[...] }],
        "outcomes": [...], "gaps": [...], "summary": "..." }
    agent: "profiler"
    async_execution: true

  resume_strategy_task:
    description: >
      Compare the ORIGINAL resume against job requirements from research_task and
      profile data from profile_task.
      
      For EACH section of the resume (Summary/Objective, Education, Experience, 
      Projects, Skills), you must:
      1. Quote the ORIGINAL text exactly as provided - do not modify it
      2. Write a SUGGESTED improved version tailored to the job requirements
      3. Provide a REASON explaining why each change improves the resume
      
      Use this EXACT output format with these delimiters:
      
      ===SECTION: [section name]===
      ORIGINAL:
      [copy the exact original text here, unchanged]
      
      SUGGESTED:
      [your improved version tailored to the job]
      
      REASON:
      [1-2 sentences explaining how this change better matches the job requirements]
      
      Repeat for each section found in the resume.
      
      After all sections, provide:
      
      ===EVALUATION===
      STRENGTHS:
      - [what the resume already does well]
      - [another strength]
      
      IMPROVEMENTS_NEEDED:
      - [what needs the most work]
      - [another area for improvement]
      
      TOP_RECOMMENDATIONS:
      1. [most important actionable tip]
      2. [second most important tip]
      3. [third tip]
      
      RULES:
      - Only use facts from profile_task; never invent experience
      - Include relevant keywords from research_task where truthful
      - Keep suggestions concise and impactful
    expected_output: >
      Structured comparison with ===SECTION: [name]=== delimiters for each 
      resume section (containing ORIGINAL, SUGGESTED, REASON), followed by 
      ===EVALUATION=== with STRENGTHS, IMPROVEMENTS_NEEDED, TOP_RECOMMENDATIONS.
    context: ["research_task", "profile_task"]
    agent: "resume_strategist"

  interview_prep_task:
    description: >
      Based on job requirements from research_task and candidate profile from
      profile_task, generate interview preparation materials.
      
      Create 6-8 likely interview questions covering:
      - Technical skills mentioned in the job posting
      - Behavioral questions (teamwork, challenges, problem-solving)
      - Role-specific scenarios relevant to the position
      
      For EACH question, use this EXACT format:
      
      ===QUESTION 1===
      Q: [The interview question]
      WHY LIKELY: [Why the interviewer would ask this, based on job posting]
      YOUR ANGLE: [How the candidate should approach this using their real experience]
      ANSWER HINTS:
      - [Specific project or experience from resume to mention]
      - [Metric or outcome to highlight]
      - [Skill or quality to emphasize]
      
      ===QUESTION 2===
      Q: [Next question]
      ...
      
      After all questions, provide:
      
      ===ELEVATOR PITCH===
      [A 30-60 second pitch tailored to this specific role, using only real 
      experience from the candidate's resume]
      
      ===KEYWORDS TO USE===
      - [keyword 1]: use when discussing [specific topic]
      - [keyword 2]: use when discussing [specific topic]
      - [keyword 3]: use when discussing [specific topic]
      
      RULES:
      - Only reference experience that actually exists in the resume/profile
      - Match question difficulty to the seniority level of the role
      - Prioritize questions that let the candidate showcase their real strengths
      - Be specific in answer hints - reference actual projects/experiences by name
    expected_output: >
      6-8 interview questions in ===QUESTION N=== format, each containing Q, 
      WHY LIKELY, YOUR ANGLE, and ANSWER HINTS. Followed by ===ELEVATOR PITCH=== 
      and ===KEYWORDS TO USE=== section.
    context: ["research_task", "profile_task"]
    agent: "interview_coach"